(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[0],{175:function(e,t,n){e.exports=n(273)},180:function(e,t,n){},181:function(e,t,n){},273:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),i=n(19),s=n.n(i),c=(n(180),n(16)),r=n(21),l=n(22),u=n(24),p=n(23),d=(n(181),n(75)),m=n.n(d),h=n(76),f=n.n(h),g=n(77),y=n.n(g),v=n(78),w=n.n(v),b=n(79),E=n(74),k=n.n(E),A=n(33),R=n.n(A),x=n(34),O=n.n(x),q=n(7),j=n(20),C=new window.AudioContext,M=[932.33,830.609,739.989,622.254,554.365,466.164,415.305,369.994,311.127,277.183,233.082,207.652,184.997,155.563,138.591,116.54],T=Object(q.withStyles)({thumb:{height:18,width:18,backgroundColor:"#000",boxShadow:"orange 0px 0px 11px 1px",border:"1px solid #FFA500","&$focused, &:hover":{boxShadow:"0px 0px 0px ".concat(8,"px ",Object(j.fade)("#FFA500",.16))},"&$activated":{boxShadow:"0px 0px 0px ".concat(12,"px ").concat(Object(j.fade)("#FFA500",.16))},"&$jumped":{boxShadow:"0px 0px 0px ".concat(12,"px ").concat(Object(j.fade)("#FFA500",.16))}},track:{backgroundColor:"#FFA500",height:3},trackBefore:{boxShadow:"orange -7px 0px 11px 1px"},trackAfter:{backgroundColor:"#d0d7dc"},focused:{},activated:{},jumped:{}})(k.a),K=function(e){Object(u.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).setAmplitude=function(e){a.config.amplitude=e},a.setAttack=function(e){a.config.attack=e},a.setDecay=function(e){a.config.decay=e},a.setAmplitude=function(e){a.config.amplitude=e},a.setModRate=function(e){a.config.modFrequency=e*(.005*e),console.log(e)},a.setTempo=function(e){a.config.tempo=e,console.log(a.config.tempo)},a.setModAmount=function(e){a.config.modAmount=e*(.001*e),console.log(e)},a.setKeysKeysAmplitude=function(e){a.configKeys.amplitude=e},a.setKeysAttack=function(e){a.configKeys.attack=e},a.setKeysDecay=function(e){a.configKeys.decay=e},a.setKeysAmplitude=function(e){a.configKeys.amplitude=e},a.setKeysModRate=function(e){a.configKeys.modFrequency=e*(.005*e),console.log(e)},a.setKeysTempo=function(e){a.configKeys.tempo=e,console.log(a.config.tempo)},a.setKeysModAmount=function(e){a.configKeys.modAmount=e*(.001*e),console.log(e)},a.handleResize=function(){var e=window.innerWidth;a.state.showControls&&(e-=250),a.setState({windowHeight:window.innerHeight,windowWidth:window.innerWidth,mainWidth:e})},a.beep=function(e){var t={attack:a.config.attack,decay:a.config.decay,frequency:e,type:"sine",amplitude:a.config.amplitude,modType:"sine",modFrequency:a.config.modFrequency,modAmount:a.config.modAmount};new B(t,t.frequency);console.log("beeped")},a.state={rythm:I(16,16),curBeat:0,isPlaying:!1,amplitude:50,showControls:!1,windowHeight:void 0,windowWidth:void 0,mainWidth:void 0},a.mouseIsDown=!1,a.timerId=null,a.config={attack:10,attackRange:[0,2e3,10],decay:1100,decayRange:[0,2e3,10],frequency:440,type:"sine",amplitude:.15,amplitudeRange:[0,.35,.01],modType:"sine",modFrequency:22,modFrequencyRange:[0,200,1],modAmount:7.2,modAmountRange:[0,600,1],tempo:75,tempoRange:[1,300,1]},a.configKeys={attack:10,attackRange:[0,2e3,10],decay:1100,decayRange:[0,2e3,10],frequency:440,type:"sine",amplitude:.15,amplitudeRange:[0,.35,.01],modType:"sine",modFrequency:22,modFrequencyRange:[0,200,1],modAmount:7.2,modAmountRange:[0,600,1],tempo:75,tempoRange:[1,300,1]},a}return Object(l.a)(n,[{key:"startRythm",value:function(){var e=this;this.state.isPlaying||(this.timerId=setTimeout((function(){return e.playBeat()}),W(this.config.tempo))),this.setState({isPlaying:!0})}},{key:"stopRythm",value:function(){clearInterval(this.timerId),this.setState({curBeat:0,isPlaying:!1})}},{key:"playBeat",value:function(){var e=this;if(this.state.rythm[this.state.curBeat].forEach((function(t,n){t&&e.beep(M[n])})),this.state.curBeat<15){var t=this.state.curBeat+1;this.setState({curBeat:t})}else this.setState({curBeat:0});this.timerId=setTimeout((function(){return e.playBeat()}),W(this.config.tempo))}},{key:"componentDidMount",value:function(){this.handleResize(),window.addEventListener("resize",this.handleResize)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleResize)}},{key:"settingsToggle",value:function(){this.setState({showControls:!this.state.showControls})}},{key:"setBeat",value:function(e,t){var n=this.state.rythm.slice();n[e][t]=!this.state.rythm[e][t],this.setState({myRythm:n})}},{key:"handleMouseDown",value:function(e,t){this.mouseIsDown=!0,this.setBeat(e,t)}},{key:"handleMouseUp",value:function(){this.mouseIsDown=!1}},{key:"handleMouseEnter",value:function(e,t){this.mouseIsDown&&this.setBeat(e,t)}},{key:"handleMouseOut",value:function(){this.mouseIsDown=!1}},{key:"render",value:function(){var e=this,t=this,n=this.props.classes,a=function(){var t=e.state.showControls?"open ":"closed ";return t+="controls"}(),i=function(){var t=e.state.showControls?"show-controls ":"";return t+="main"}();(function(){var t=e.state.showControls?"show-controls ":"";t+="main"})(),(this.state.windowWidth/16-2).toString();console.log("beep size was rendered");var s=this.state.rythm.map((function(n,a){return o.a.createElement("div",{className:Math.ceil((a+1)/4)%2===0?"beep-col even":"beep-col odd",key:a},n.map((function(n,i){var s=a===e.state.curBeat&&e.state.isPlaying?"active":"inactive";return s+=e.state.rythm[a][i]?" on":" off",o.a.createElement("div",{className:"beep",onMouseDown:function(){return t.handleMouseDown(a,i)},onMouseEnter:function(){return t.handleMouseEnter(a,i)},onMouseUp:function(){return t.handleMouseUp(a,i)},key:i},o.a.createElement("div",{className:"beep-inner "+s}))})))}));return o.a.createElement("div",null,o.a.createElement(R.a,{className:"appbar"},o.a.createElement(O.a,{className:"toolbar"},o.a.createElement("div",{className:"playstop"},o.a.createElement("span",{hidden:this.state.isPlaying,className:"play-icon icon"},o.a.createElement(m.a,{onClick:function(){e.startRythm()}})),o.a.createElement("span",{hidden:!this.state.isPlaying,className:"stop-icon icon"},o.a.createElement(f.a,{onClick:function(){e.stopRythm()},hidden:!this.state.isPlaying})),o.a.createElement("span",{className:"settings-icon icon"},o.a.createElement(y.a,{onClick:function(){e.settingsToggle()}}))),o.a.createElement("div",{className:"tempo-slider"},o.a.createElement(N,{name:"BPM",init:75,handleChange:this.setTempo,min:this.config.tempoRange[0],max:this.config.tempoRange[1],step:this.config.tempoRange[2]})))),o.a.createElement("div",{className:a},o.a.createElement("div",{className:"toolbar"},o.a.createElement(w.a,{className:"pull-right",onClick:function(){e.settingsToggle()}})),o.a.createElement(F,{classes:n,config:this.config,setAmplitude:this.setAmplitude,setAttack:this.setAttack,setDecay:this.setDecay,setModAmount:this.setModAmount,setModRate:this.setModRate}),o.a.createElement("hr",null),o.a.createElement(F,{classes:n,config:this.configKeys,setAmplitude:this.setKeysAmplitude,setAttack:this.setKeysAttack,setDecay:this.setKeysDecay,setModAmount:this.setKeysModAmount,setModRate:this.setKeysModRate})),o.a.createElement("main",{className:i},s),o.a.createElement("p",{className:"ptest"},this.state.windowWidth," x ",this.state.windowHeight),o.a.createElement("div",{id:"keyboard-wrapper",className:this.state.showControls?"show-controls ":""},o.a.createElement(D,{config:this.configKeys})))}}]),n}(o.a.Component),N=function(e){Object(u.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={value:e.props.init},e.handleChange=function(t,n){e.setState({value:n}),e.props.handleChange(n)},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.state.value;return o.a.createElement("div",null,o.a.createElement(b.a,null,this.props.name),o.a.createElement(T,{className:"slider",value:e,min:this.props.min,max:this.props.max,step:this.props.step,onChange:this.handleChange}))}}]),n}(o.a.Component),S=function(e){Object(u.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).state={active:!1},a.handleDown=a.handleDown.bind(Object(c.a)(a)),a.handleUp=a.handleUp.bind(Object(c.a)(a)),a.handleOut=a.handleOut.bind(Object(c.a)(a)),a.handleEnter=a.handleEnter.bind(Object(c.a)(a)),a.beep=void 0,a}return Object(l.a)(n,[{key:"handleDown",value:function(){if(!this.state.active){var e=JSON.parse(JSON.stringify(this.props.config));e.freq=this.props.freq,this.beep=new B(e,this.props.freq,!0),this.setState({active:!0})}}},{key:"handleUp",value:function(){this.state.active&&(this.beep.fadeOut(),this.setState({active:!1}))}},{key:"handleOut",value:function(){this.state.active&&(this.beep.fadeOut(),this.setState({active:!1}))}},{key:"handleEnter",value:function(){!this.state.active&&U&&(this.beep=new B(this.props.config,this.props.freq,!0),this.setState({active:!0}))}},{key:"render",value:function(){return o.a.createElement("div",{className:"beep key beep-col",onMouseDown:this.handleDown,onMouseUp:this.handleUp,onMouseLeave:this.handleOut,onMouseEnter:this.handleEnter},o.a.createElement("div",{className:this.state.active?"beep-inner active":"beep-inner"}))}}]),n}(o.a.Component),D=function(e){Object(u.a)(n,e);var t=Object(p.a)(n);function n(e){return Object(r.a)(this,n),t.call(this,e)}return Object(l.a)(n,[{key:"render",value:function(){return o.a.createElement("div",{id:"keyboard"},o.a.createElement(S,{config:this.props.config,freq:M[15]}),o.a.createElement(S,{config:this.props.config,freq:M[14]}),o.a.createElement(S,{config:this.props.config,freq:M[13]}),o.a.createElement(S,{config:this.props.config,freq:M[12]}),o.a.createElement(S,{config:this.props.config,freq:M[11]}),o.a.createElement(S,{config:this.props.config,freq:M[10]}),o.a.createElement(S,{config:this.props.config,freq:M[9]}),o.a.createElement(S,{config:this.props.config,freq:M[8]}),o.a.createElement(S,{config:this.props.config,freq:M[7]}),o.a.createElement(S,{config:this.props.config,freq:M[6]}),o.a.createElement(S,{config:this.props.config,freq:M[5]}),o.a.createElement(S,{config:this.props.config,freq:M[4]}),o.a.createElement(S,{config:this.props.config,freq:M[3]}),o.a.createElement(S,{config:this.props.config,freq:M[2]}),o.a.createElement(S,{config:this.props.config,freq:M[1]}),o.a.createElement(S,{config:this.props.config,freq:M[0]}))}}]),n}(o.a.Component),F=function(e){Object(u.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).state={},a}return Object(l.a)(n,[{key:"render",value:function(){return o.a.createElement("div",{className:this.props.classes.sliderWrap+" slider"},o.a.createElement(N,{name:"amplitude",init:this.props.config.amplitude,handleChange:this.props.setAmplitude,min:0,max:this.props.config.amplitudeRange[1],step:this.props.config.amplitudeRange[2]}),o.a.createElement(N,{name:"attack",init:this.props.config.attack,handleChange:this.props.setAttack,min:0,max:this.props.config.attackRange[1],step:this.props.config.attackRange[2]}),o.a.createElement(N,{name:"decay",init:this.props.config.decay,handleChange:this.props.setDecay,min:0,max:this.props.config.decayRange[1],step:this.props.config.decayRange[2]}),o.a.createElement(N,{name:"modulation amount",init:131,handleChange:this.props.setModAmount,min:0,max:this.props.config.modAmountRange[1],step:this.props.config.modAmountRange[2]}),o.a.createElement(N,{name:"modulation rate",init:50,handleChange:this.props.setModRate,min:0,max:this.props.config.modFrequencyRange[1],step:this.props.config.modFrequencyRange[2]}))}}]),n}(o.a.Component);function B(e,t,n){var a=this,o=e.attack,i=e.decay,s=C.createGain(),c=C.createOscillator(),r=e.amplitude,l=e.modAmount,u=!1;if(void 0!==n&&n&&(console.log("config.decay"),console.log(e.decay),u=!0),s.connect(C.destination),s.gain.setValueAtTime(0,C.currentTime),s.gain.linearRampToValueAtTime(r,C.currentTime+o/1e3),void 0!==n&&n||s.gain.linearRampToValueAtTime(0,C.currentTime+i/1e3),c.frequency.value=t,c.type=e.type,c.connect(s),c.start(0),"none"!==e.modType){var p=C.createGain();p.gain.value=l,p.connect(c.frequency);var d=C.createOscillator();d.type=e.modType,d.frequency.value=e.modFrequency,d.connect(p),d.start(0)}u||setTimeout((function(){c.stop(0),c.disconnect(s),s.disconnect(C.destination),"none"!==e.modType&&(d.stop(0),p.disconnect(c.frequency))}),i),this.kill=function(){c.stop(0),c.disconnect(s),s.disconnect(C.destination),"none"!==e.modType&&(d.stop(0),p.disconnect(c.frequency)),console.log("kill called")},this.fadeOut=function(){s.gain.linearRampToValueAtTime(0,C.currentTime+e.decay/1e3),setTimeout(a.kill,e.decay)}}function I(e,t){for(var n=[],a=0;a<e;a++){for(var o=[],i=0;i<t;i++)o.push(!1);n.push(o)}return n}function W(e){return 15e3/e}var P=Object(q.withStyles)({Typography:{color:"orange"},text:{color:"orange"},sliderWrap:{width:250},slider:{padding:"22px 0px"},toolbarIcon:{display:"flex",alignItems:"center",justifyContent:"flex-end",padding:"0 8px"}})(K),U=!1;document.body.onmousedown=function(){U=!0,console.log(U)},document.body.onmouseup=function(){U=!1,console.log(U)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(o.a.createElement("div",null,o.a.createElement(P,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[175,1,2]]]);
//# sourceMappingURL=main.53960eb6.chunk.js.map